{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/user.service\";\nimport * as i3 from \"../../../services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/snack-bar\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/toolbar\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/card\";\nimport * as i10 from \"@angular/material/form-field\";\nimport * as i11 from \"@angular/material/input\";\nimport * as i12 from \"@angular/material/icon\";\nimport * as i13 from \"@angular/material/progress-spinner\";\nfunction UsuarioFormComponent_mat_error_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Nome \\u00E9 obrigat\\u00F3rio \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsuarioFormComponent_mat_error_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Email \\u00E9 obrigat\\u00F3rio e deve ser v\\u00E1lido \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsuarioFormComponent_mat_error_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Senha \\u00E9 obrigat\\u00F3ria e deve ter pelo menos 6 caracteres \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsuarioFormComponent_mat_error_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Confirma\\u00E7\\u00E3o de senha \\u00E9 obrigat\\u00F3ria \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsuarioFormComponent_mat_error_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" As senhas n\\u00E3o coincidem \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsuarioFormComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"mat-icon\", 23);\n    i0.ɵɵtext(2, \"error\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nfunction UsuarioFormComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"mat-icon\", 25);\n    i0.ɵɵtext(2, \"check_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.successMessage);\n  }\n}\nfunction UsuarioFormComponent_mat_spinner_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\", 26);\n  }\n}\nfunction UsuarioFormComponent_mat_icon_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"person_add\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let UsuarioFormComponent = /*#__PURE__*/(() => {\n  class UsuarioFormComponent {\n    constructor(fb, userService, authService, router, snackBar) {\n      this.fb = fb;\n      this.userService = userService;\n      this.authService = authService;\n      this.router = router;\n      this.snackBar = snackBar;\n      this.loading = false;\n      this.errorMessage = '';\n      this.successMessage = '';\n      this.userForm = this.fb.group({\n        name: ['', [Validators.required]],\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required, Validators.minLength(6)]],\n        confirmPassword: ['', [Validators.required]]\n      }, {\n        validators: this.passwordMatchValidator\n      });\n    }\n    ngOnInit() {\n      // Verificar se o usuário está autenticado e é admin\n      if (!this.authService.isAuthenticated()) {\n        this.router.navigate(['/login']);\n        return;\n      }\n      if (!this.authService.isAdmin()) {\n        this.snackBar.open('Apenas administradores podem criar usuários', 'Fechar', {\n          duration: 5000,\n          horizontalPosition: 'center',\n          verticalPosition: 'top'\n        });\n        this.router.navigate(['/usuarios']);\n      }\n    }\n    passwordMatchValidator(form) {\n      const password = form.get('password');\n      const confirmPassword = form.get('confirmPassword');\n      if (password && confirmPassword && password.value !== confirmPassword.value) {\n        return {\n          passwordMismatch: true\n        };\n      }\n      return null;\n    }\n    onSubmit() {\n      if (this.userForm.valid) {\n        this.loading = true;\n        this.errorMessage = '';\n        this.successMessage = '';\n        const userData = {\n          name: this.userForm.value.name,\n          email: this.userForm.value.email,\n          password: this.userForm.value.password\n        };\n        this.userService.createUser(userData).subscribe({\n          next: user => {\n            this.loading = false;\n            this.successMessage = 'Usuário criado com sucesso!';\n            this.userForm.reset();\n            this.snackBar.open('Usuário criado com sucesso!', 'Fechar', {\n              duration: 3000,\n              horizontalPosition: 'center',\n              verticalPosition: 'top'\n            });\n            // Redirecionar após 2 segundos\n            setTimeout(() => {\n              this.router.navigate(['/usuarios']);\n            }, 2000);\n          },\n          error: error => {\n            this.loading = false;\n            this.errorMessage = 'Erro ao criar usuário. Verifique os dados e tente novamente.';\n            this.snackBar.open('Erro ao criar usuário. Verifique os dados e tente novamente.', 'Fechar', {\n              duration: 5000,\n              horizontalPosition: 'center',\n              verticalPosition: 'top'\n            });\n            console.error('Erro ao criar usuário:', error);\n          }\n        });\n      }\n    }\n    cancel() {\n      this.router.navigate(['/usuarios']);\n    }\n    logout() {\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n    static {\n      this.ɵfac = function UsuarioFormComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || UsuarioFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UsuarioFormComponent,\n        selectors: [[\"app-usuario-form\"]],\n        decls: 65,\n        vars: 13,\n        consts: [[1, \"app-container\"], [\"color\", \"primary\", 1, \"app-toolbar\"], [\"mat-icon-button\", \"\", \"routerLink\", \"/usuarios\"], [1, \"spacer\"], [\"mat-button\", \"\", 3, \"click\"], [1, \"content\"], [1, \"form-card\"], [1, \"user-form\", 3, \"ngSubmit\", \"formGroup\"], [1, \"form-row\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"name\", \"placeholder\", \"Digite o nome do usu\\u00E1rio\"], [\"matSuffix\", \"\"], [4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"Digite o email do usu\\u00E1rio\"], [\"matInput\", \"\", \"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"Digite a senha do usu\\u00E1rio\"], [\"matInput\", \"\", \"type\", \"password\", \"formControlName\", \"confirmPassword\", \"placeholder\", \"Confirme a senha\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"class\", \"success-message\", 4, \"ngIf\"], [1, \"form-actions\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [\"diameter\", \"20\", \"style\", \"margin-right: 8px;\", 4, \"ngIf\"], [\"mat-button\", \"\", 3, \"click\", \"disabled\"], [1, \"error-message\"], [\"color\", \"warn\"], [1, \"success-message\"], [\"color\", \"primary\"], [\"diameter\", \"20\", 2, \"margin-right\", \"8px\"]],\n        template: function UsuarioFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"mat-toolbar\", 1)(2, \"button\", 2)(3, \"mat-icon\");\n            i0.ɵɵtext(4, \"arrow_back\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(5, \"span\");\n            i0.ɵɵtext(6, \"Novo Usu\\u00E1rio\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(7, \"span\", 3);\n            i0.ɵɵelementStart(8, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function UsuarioFormComponent_Template_button_click_8_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵelementStart(9, \"mat-icon\");\n            i0.ɵɵtext(10, \"logout\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(11, \" Sair \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\", 5)(13, \"mat-card\", 6)(14, \"mat-card-header\")(15, \"mat-card-title\");\n            i0.ɵɵtext(16, \"Criar Novo Usu\\u00E1rio\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"mat-card-subtitle\");\n            i0.ɵɵtext(18, \"Preencha os dados do usu\\u00E1rio\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(19, \"mat-card-content\")(20, \"form\", 7);\n            i0.ɵɵlistener(\"ngSubmit\", function UsuarioFormComponent_Template_form_ngSubmit_20_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(21, \"div\", 8)(22, \"mat-form-field\", 9)(23, \"mat-label\");\n            i0.ɵɵtext(24, \"Nome\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(25, \"input\", 10);\n            i0.ɵɵelementStart(26, \"mat-icon\", 11);\n            i0.ɵɵtext(27, \"person\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(28, UsuarioFormComponent_mat_error_28_Template, 2, 0, \"mat-error\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(29, \"div\", 8)(30, \"mat-form-field\", 9)(31, \"mat-label\");\n            i0.ɵɵtext(32, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(33, \"input\", 13);\n            i0.ɵɵelementStart(34, \"mat-icon\", 11);\n            i0.ɵɵtext(35, \"email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(36, UsuarioFormComponent_mat_error_36_Template, 2, 0, \"mat-error\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(37, \"div\", 8)(38, \"mat-form-field\", 9)(39, \"mat-label\");\n            i0.ɵɵtext(40, \"Senha\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(41, \"input\", 14);\n            i0.ɵɵelementStart(42, \"mat-icon\", 11);\n            i0.ɵɵtext(43, \"lock\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(44, UsuarioFormComponent_mat_error_44_Template, 2, 0, \"mat-error\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(45, \"div\", 8)(46, \"mat-form-field\", 9)(47, \"mat-label\");\n            i0.ɵɵtext(48, \"Confirmar Senha\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(49, \"input\", 15);\n            i0.ɵɵelementStart(50, \"mat-icon\", 11);\n            i0.ɵɵtext(51, \"lock\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(52, UsuarioFormComponent_mat_error_52_Template, 2, 0, \"mat-error\", 12)(53, UsuarioFormComponent_mat_error_53_Template, 2, 0, \"mat-error\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(54, UsuarioFormComponent_div_54_Template, 5, 1, \"div\", 16)(55, UsuarioFormComponent_div_55_Template, 5, 1, \"div\", 17);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(56, \"mat-card-actions\", 18)(57, \"button\", 19);\n            i0.ɵɵlistener(\"click\", function UsuarioFormComponent_Template_button_click_57_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵtemplate(58, UsuarioFormComponent_mat_spinner_58_Template, 1, 0, \"mat-spinner\", 20)(59, UsuarioFormComponent_mat_icon_59_Template, 2, 0, \"mat-icon\", 12);\n            i0.ɵɵtext(60);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(61, \"button\", 21);\n            i0.ɵɵlistener(\"click\", function UsuarioFormComponent_Template_button_click_61_listener() {\n              return ctx.cancel();\n            });\n            i0.ɵɵelementStart(62, \"mat-icon\");\n            i0.ɵɵtext(63, \"cancel\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(64, \" Cancelar \");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            let tmp_1_0;\n            let tmp_2_0;\n            let tmp_3_0;\n            let tmp_4_0;\n            let tmp_5_0;\n            i0.ɵɵadvance(20);\n            i0.ɵɵproperty(\"formGroup\", ctx.userForm);\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.userForm.get(\"name\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx.userForm.get(\"name\")) == null ? null : tmp_1_0.touched));\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.userForm.get(\"email\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx.userForm.get(\"email\")) == null ? null : tmp_2_0.touched));\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.userForm.get(\"password\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx.userForm.get(\"password\")) == null ? null : tmp_3_0.touched));\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.userForm.get(\"confirmPassword\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx.userForm.get(\"confirmPassword\")) == null ? null : tmp_4_0.touched));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.userForm.hasError(\"passwordMismatch\") && ((tmp_5_0 = ctx.userForm.get(\"confirmPassword\")) == null ? null : tmp_5_0.touched));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.userForm.invalid || ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Criando...\" : \"Criar Usu\\u00E1rio\", \" \");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n          }\n        },\n        dependencies: [CommonModule, i6.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, RouterModule, i4.RouterLink, MatToolbarModule, i7.MatToolbar, MatButtonModule, i8.MatButton, i8.MatIconButton, MatCardModule, i9.MatCard, i9.MatCardActions, i9.MatCardContent, i9.MatCardHeader, i9.MatCardSubtitle, i9.MatCardTitle, MatFormFieldModule, i10.MatFormField, i10.MatLabel, i10.MatError, i10.MatSuffix, MatInputModule, i11.MatInput, MatIconModule, i12.MatIcon, MatProgressSpinnerModule, i13.MatProgressSpinner, MatSnackBarModule],\n        styles: [\".app-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f5f5}.app-toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.content[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.form-card[_ngcontent-%COMP%]{margin-top:20px}.user-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-row[_ngcontent-%COMP%], .full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:flex-end;padding:16px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;background-color:#ffebee;border-radius:4px;color:#c62828}.success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;background-color:#e8f5e8;border-radius:4px;color:#2e7d32}\"]\n      });\n    }\n  }\n  return UsuarioFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}