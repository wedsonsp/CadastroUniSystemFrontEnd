"use strict";(self.webpackChunkprojeto_wedson_front=self.webpackChunkprojeto_wedson_front||[]).push([[717],{6717:(W,p,e)=>{e.r(p),e.d(p,{UsuarioFormComponent:()=>K});var g=e(2881),t=e(9417),f=e(5207),E=e(5911),F=e(8834),u=e(5596),k=e(6704),h=e(6863),v=e(9980),M=e(9183),P=e(8822),r=e(1360),D=e(9885),O=e(4796),U=e(3946),I=e(4506),c=e(2469);function b(a,m){1&a&&(r.j41(0,"mat-error"),r.EFF(1," Nome \xe9 obrigat\xf3rio "),r.k0s())}function R(a,m){1&a&&(r.j41(0,"mat-error"),r.EFF(1," Email \xe9 obrigat\xf3rio e deve ser v\xe1lido "),r.k0s())}function T(a,m){1&a&&(r.j41(0,"mat-error"),r.EFF(1," Senha \xe9 obrigat\xf3ria e deve ter pelo menos 6 caracteres "),r.k0s())}function j(a,m){1&a&&(r.j41(0,"mat-error"),r.EFF(1," Confirma\xe7\xe3o de senha \xe9 obrigat\xf3ria "),r.k0s())}function B(a,m){1&a&&(r.j41(0,"mat-error"),r.EFF(1," As senhas n\xe3o coincidem "),r.k0s())}function A(a,m){if(1&a&&(r.j41(0,"div",22)(1,"mat-icon",23),r.EFF(2,"error"),r.k0s(),r.j41(3,"span"),r.EFF(4),r.k0s()()),2&a){const n=r.XpG();r.R7$(4),r.JRh(n.errorMessage)}}function L(a,m){if(1&a&&(r.j41(0,"div",24)(1,"mat-icon",25),r.EFF(2,"check_circle"),r.k0s(),r.j41(3,"span"),r.EFF(4),r.k0s()()),2&a){const n=r.XpG();r.R7$(4),r.JRh(n.successMessage)}}function S(a,m){1&a&&r.nrm(0,"mat-spinner",26)}function G(a,m){1&a&&(r.j41(0,"mat-icon"),r.EFF(1,"person_add"),r.k0s())}let K=(()=>{class a{constructor(n,s,o,i,l){this.fb=n,this.userService=s,this.authService=o,this.router=i,this.snackBar=l,this.loading=!1,this.errorMessage="",this.successMessage="",this.userForm=this.fb.group({name:["",[t.k0.required]],email:["",[t.k0.required,t.k0.email]],password:["",[t.k0.required,t.k0.minLength(6)]],confirmPassword:["",[t.k0.required]]},{validators:this.passwordMatchValidator})}ngOnInit(){this.authService.isAuthenticated()?this.authService.isAdmin()||(this.snackBar.open("Apenas administradores podem criar usu\xe1rios","Fechar",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),this.router.navigate(["/usuarios"])):this.router.navigate(["/login"])}passwordMatchValidator(n){const s=n.get("password"),o=n.get("confirmPassword");return s&&o&&s.value!==o.value?{passwordMismatch:!0}:null}onSubmit(){this.userForm.valid&&(this.loading=!0,this.errorMessage="",this.successMessage="",this.userService.createUser({name:this.userForm.value.name,email:this.userForm.value.email,password:this.userForm.value.password}).subscribe({next:s=>{this.loading=!1,this.successMessage="Usu\xe1rio criado com sucesso!",this.userForm.reset(),this.snackBar.open("Usu\xe1rio criado com sucesso!","Fechar",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"}),setTimeout(()=>{this.router.navigate(["/usuarios"])},2e3)},error:s=>{this.loading=!1,this.errorMessage="Erro ao criar usu\xe1rio. Verifique os dados e tente novamente.",this.snackBar.open("Erro ao criar usu\xe1rio. Verifique os dados e tente novamente.","Fechar",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),console.error("Erro ao criar usu\xe1rio:",s)}}))}cancel(){this.router.navigate(["/usuarios"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}static{this.\u0275fac=function(s){return new(s||a)(r.rXU(t.ok),r.rXU(D.D),r.rXU(O.u),r.rXU(U.Ix),r.rXU(P.UG))}}static{this.\u0275cmp=r.VBU({type:a,selectors:[["app-usuario-form"]],decls:65,vars:13,consts:[[1,"app-container"],["color","primary",1,"app-toolbar"],["mat-icon-button","","routerLink","/usuarios"],[1,"spacer"],["mat-button","",3,"click"],[1,"content"],[1,"form-card"],[1,"user-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","type","text","formControlName","name","placeholder","Digite o nome do usu\xe1rio"],["matSuffix",""],[4,"ngIf"],["matInput","","type","email","formControlName","email","placeholder","Digite o email do usu\xe1rio"],["matInput","","type","password","formControlName","password","placeholder","Digite a senha do usu\xe1rio"],["matInput","","type","password","formControlName","confirmPassword","placeholder","Confirme a senha"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","20","style","margin-right: 8px;",4,"ngIf"],["mat-button","",3,"click","disabled"],[1,"error-message"],["color","warn"],[1,"success-message"],["color","primary"],["diameter","20",2,"margin-right","8px"]],template:function(s,o){if(1&s&&(r.j41(0,"div",0)(1,"mat-toolbar",1)(2,"button",2)(3,"mat-icon"),r.EFF(4,"arrow_back"),r.k0s()(),r.j41(5,"span"),r.EFF(6,"Novo Usu\xe1rio"),r.k0s(),r.nrm(7,"span",3),r.j41(8,"button",4),r.bIt("click",function(){return o.logout()}),r.j41(9,"mat-icon"),r.EFF(10,"logout"),r.k0s(),r.EFF(11," Sair "),r.k0s()(),r.j41(12,"div",5)(13,"mat-card",6)(14,"mat-card-header")(15,"mat-card-title"),r.EFF(16,"Criar Novo Usu\xe1rio"),r.k0s(),r.j41(17,"mat-card-subtitle"),r.EFF(18,"Preencha os dados do usu\xe1rio"),r.k0s()(),r.j41(19,"mat-card-content")(20,"form",7),r.bIt("ngSubmit",function(){return o.onSubmit()}),r.j41(21,"div",8)(22,"mat-form-field",9)(23,"mat-label"),r.EFF(24,"Nome"),r.k0s(),r.nrm(25,"input",10),r.j41(26,"mat-icon",11),r.EFF(27,"person"),r.k0s(),r.DNE(28,b,2,0,"mat-error",12),r.k0s()(),r.j41(29,"div",8)(30,"mat-form-field",9)(31,"mat-label"),r.EFF(32,"Email"),r.k0s(),r.nrm(33,"input",13),r.j41(34,"mat-icon",11),r.EFF(35,"email"),r.k0s(),r.DNE(36,R,2,0,"mat-error",12),r.k0s()(),r.j41(37,"div",8)(38,"mat-form-field",9)(39,"mat-label"),r.EFF(40,"Senha"),r.k0s(),r.nrm(41,"input",14),r.j41(42,"mat-icon",11),r.EFF(43,"lock"),r.k0s(),r.DNE(44,T,2,0,"mat-error",12),r.k0s()(),r.j41(45,"div",8)(46,"mat-form-field",9)(47,"mat-label"),r.EFF(48,"Confirmar Senha"),r.k0s(),r.nrm(49,"input",15),r.j41(50,"mat-icon",11),r.EFF(51,"lock"),r.k0s(),r.DNE(52,j,2,0,"mat-error",12)(53,B,2,0,"mat-error",12),r.k0s()(),r.DNE(54,A,5,1,"div",16)(55,L,5,1,"div",17),r.k0s()(),r.j41(56,"mat-card-actions",18)(57,"button",19),r.bIt("click",function(){return o.onSubmit()}),r.DNE(58,S,1,0,"mat-spinner",20)(59,G,2,0,"mat-icon",12),r.EFF(60),r.k0s(),r.j41(61,"button",21),r.bIt("click",function(){return o.cancel()}),r.j41(62,"mat-icon"),r.EFF(63,"cancel"),r.k0s(),r.EFF(64," Cancelar "),r.k0s()()()()()),2&s){let i,l,_,d,C;r.R7$(20),r.Y8G("formGroup",o.userForm),r.R7$(8),r.Y8G("ngIf",(null==(i=o.userForm.get("name"))?null:i.invalid)&&(null==(i=o.userForm.get("name"))?null:i.touched)),r.R7$(8),r.Y8G("ngIf",(null==(l=o.userForm.get("email"))?null:l.invalid)&&(null==(l=o.userForm.get("email"))?null:l.touched)),r.R7$(8),r.Y8G("ngIf",(null==(_=o.userForm.get("password"))?null:_.invalid)&&(null==(_=o.userForm.get("password"))?null:_.touched)),r.R7$(8),r.Y8G("ngIf",(null==(d=o.userForm.get("confirmPassword"))?null:d.invalid)&&(null==(d=o.userForm.get("confirmPassword"))?null:d.touched)),r.R7$(),r.Y8G("ngIf",o.userForm.hasError("passwordMismatch")&&(null==(C=o.userForm.get("confirmPassword"))?null:C.touched)),r.R7$(),r.Y8G("ngIf",o.errorMessage),r.R7$(),r.Y8G("ngIf",o.successMessage),r.R7$(2),r.Y8G("disabled",o.userForm.invalid||o.loading),r.R7$(),r.Y8G("ngIf",o.loading),r.R7$(),r.Y8G("ngIf",!o.loading),r.R7$(),r.SpI(" ",o.loading?"Criando...":"Criar Usu\xe1rio"," "),r.R7$(),r.Y8G("disabled",o.loading)}},dependencies:[g.MD,g.bT,t.X1,t.qT,t.me,t.BC,t.cb,t.j4,t.JD,f.iI,f.Wk,E.s5,E.KQ,F.Hl,F.$z,I.M,u.Hu,u.RN,u.YY,u.m2,u.MM,u.Lc,u.dh,k.M,c.j,c.M,c.b,c.g,h.fS,h.fg,v.m_,v.An,M.D6,M.LG,P._T],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f5f5}.app-toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.content[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.form-card[_ngcontent-%COMP%]{margin-top:20px}.user-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-row[_ngcontent-%COMP%], .full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:flex-end;padding:16px}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;background-color:#ffebee;border-radius:4px;color:#c62828}.success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px;background-color:#e8f5e8;border-radius:4px;color:#2e7d32}"]})}}return a})()}}]);