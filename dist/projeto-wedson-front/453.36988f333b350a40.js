"use strict";(self.webpackChunkprojeto_wedson_front=self.webpackChunkprojeto_wedson_front||[]).push([[453],{4453:(I,d,o)=>{o.r(d),o.d(d,{LoginComponent:()=>F});var u=o(2881),a=o(9417),s=o(5596),h=o(6704),c=o(6863),p=o(8834),f=o(9183),E=o(8822),n=o(1360),M=o(4796),D=o(3946),g=o(2469);function P(r,_){1&r&&(n.j41(0,"mat-error"),n.EFF(1," Email \xe9 obrigat\xf3rio "),n.k0s())}function v(r,_){1&r&&(n.j41(0,"mat-error"),n.EFF(1," Senha \xe9 obrigat\xf3ria "),n.k0s())}function C(r,_){if(1&r&&(n.j41(0,"div",10),n.EFF(1),n.k0s()),2&r){const i=n.XpG();n.R7$(),n.SpI(" ",i.errorMessage," ")}}function O(r,_){1&r&&n.nrm(0,"mat-spinner",11)}let F=(()=>{class r{constructor(i,e,t,l){this.fb=i,this.authService=e,this.router=t,this.snackBar=l,this.loading=!1,this.errorMessage="",this.loginForm=this.fb.group({email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required]]})}onSubmit(){if(this.loginForm.valid){this.loading=!0,this.errorMessage="",localStorage.removeItem("token"),localStorage.removeItem("user");const i=this.loginForm.value;console.log("Dados do login:",i),this.authService.login(i).subscribe({next:e=>{console.log("Login bem-sucedido:",e),this.snackBar.open("Login realizado com sucesso!","Fechar",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"}),this.router.navigate(["/usuarios"])},error:e=>{this.loading=!1,this.errorMessage="Email ou senha inv\xe1lidos",this.snackBar.open("Erro no login. Verifique suas credenciais.","Fechar",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),console.error("Erro no login:",e),console.error("Detalhes do erro:",e.error)}})}}static{this.\u0275fac=function(e){return new(e||r)(n.rXU(a.ok),n.rXU(M.u),n.rXU(D.Ix),n.rXU(E.UG))}}static{this.\u0275cmp=n.VBU({type:r,selectors:[["app-login"]],decls:22,vars:7,consts:[[1,"login-container"],[1,"login-card"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","Digite seu email"],[4,"ngIf"],["matInput","","type","password","formControlName","password","placeholder","Digite sua senha"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary",1,"full-width",3,"click","disabled"],["diameter","20","style","margin-right: 10px;",4,"ngIf"],[1,"error-message"],["diameter","20",2,"margin-right","10px"]],template:function(e,t){if(1&e&&(n.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),n.EFF(4,"Login"),n.k0s()(),n.j41(5,"mat-card-content")(6,"form",2),n.bIt("ngSubmit",function(){return t.onSubmit()}),n.j41(7,"mat-form-field",3)(8,"mat-label"),n.EFF(9,"Email"),n.k0s(),n.nrm(10,"input",4),n.DNE(11,P,2,0,"mat-error",5),n.k0s(),n.j41(12,"mat-form-field",3)(13,"mat-label"),n.EFF(14,"Senha"),n.k0s(),n.nrm(15,"input",6),n.DNE(16,v,2,0,"mat-error",5),n.k0s(),n.DNE(17,C,2,1,"div",7),n.k0s()(),n.j41(18,"mat-card-actions")(19,"button",8),n.bIt("click",function(){return t.onSubmit()}),n.DNE(20,O,1,0,"mat-spinner",9),n.EFF(21),n.k0s()()()()),2&e){let l,m;n.R7$(6),n.Y8G("formGroup",t.loginForm),n.R7$(5),n.Y8G("ngIf",(null==(l=t.loginForm.get("email"))?null:l.invalid)&&(null==(l=t.loginForm.get("email"))?null:l.touched)),n.R7$(5),n.Y8G("ngIf",(null==(m=t.loginForm.get("password"))?null:m.invalid)&&(null==(m=t.loginForm.get("password"))?null:m.touched)),n.R7$(),n.Y8G("ngIf",t.errorMessage),n.R7$(2),n.Y8G("disabled",t.loginForm.invalid||t.loading),n.R7$(),n.Y8G("ngIf",t.loading),n.R7$(),n.SpI(" ",t.loading?"Entrando...":"Entrar"," ")}},dependencies:[u.MD,u.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,s.Hu,s.RN,s.YY,s.m2,s.MM,s.dh,h.M,g.j,g.M,g.b,c.fS,c.fg,p.Hl,p.$z,f.D6,f.LG,E._T],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{max-width:400px;width:100%}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:#f44336;font-size:14px;margin-top:8px}mat-card-actions[_ngcontent-%COMP%]{padding:16px}"]})}}return r})()}}]);